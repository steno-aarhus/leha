---
title: "Recoding variables documentation"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Recoding variables in UKB

All coding relies on the ukbAid packages (REF)

### Smoking

**Smoking status** For people who want to use smoking status only,
p20116 can be used as it contains the categories current; former; never
smokers. <https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20116>

**Smoking heaviness** As previously coded by Clift et al. [1], when
wanting a more detailed smoking classification five groups can be
created by combining p20116 and p3456 (number of cigarettes currently
smoked daily; <https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=3456>).
Clift et al. categorized participants as light smokers (\<10
cigarettes/day), moderate smokers (10--19 cigarettes/day) and heavy
smokers (â‰¥20 cigarettes/day). For time to event analyses, smoking
heaviness should be based on the most recent information collected prior
to baseline of the study. As an example, the leha repository is a
prospective cohort study investigating dietary habits and risk of liver
disease. The project will run Cox regression including follow-up time
for participants immediately following the inclusion into the UK Biobank
and thus only include the baseline measure of cigarettes smoked daily in
the smoking variable.

-   First recode number of cigarettes (p3456)\*

```{r}
install.packages("dplyr")
data <- data %>% 
  dplyr::mutate(
    cigday_groups = case_when(p3456 < 10 ~ 0,
                              p3456 >= 10 & p3456 < 19 ~ 1,
                              p3456 >= 19 ~ 2))
                

                
data$new_variable <- "NA"
data$new_variable[data$p3456_i0<10]<-0
data$new_variable[(data$p3456_i0>10 & data$p3456_i0<=19)]<-1
data$new_variable[data$p3456_i0>19]<-2
```

-1 represents "Do not know" -3 represents "Prefer not to answer" Above
needs to be recoded

When recoded we need to merge p20116 and new_variable somehow

```{r}
data <- data %>% 
  dplyr::mutate(smoke_heaviness = )
```

Long-term smoking exposure Smoking behaviour was self-reported by
participants at baseline at the assessment centres. Participants were
asked about smoking status (current, former or never), age of
initiation, and cigarettes smoked per day. A variable reflecting
lifetime smoking behaviour was generated by combining the smoking
measures into an index and a half-life constant reflecting the
exponential decrease in effect of smoking at a given time on health. A
detailed overview of the construction of this variable can be found
elsewhere. [10]

<https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0285258#references>

1.  Clift, A.K., A. von Ende, P.S. Tan, H.M. Sallis, N. Lindson, C.A.C.
    Coupland, et al., Smoking and COVID-19 outcomes: an observational
    and Mendelian randomisation study using the UK Biobank cohort.
    Thorax, 2022. 77(1): p. 65-73

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax
for authoring HTML, PDF, and MS Word documents. For more details on
using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that
includes both content as well as the output of any embedded R code
chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to
prevent printing of the R code that generated the plot.
